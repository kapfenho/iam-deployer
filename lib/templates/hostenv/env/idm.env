# oracle home: binaries and apps
export      APP_SERVER=weblogic
export         MW_HOME=${ORACLE_BASE}/products/identity
export         WL_HOME=${MW_HOME}/wlserver_10.3
export     ORACLE_HOME=${MW_HOME}/iam
export   ORACLE_COMMON=${MW_HOME}/oracle_common
export OIM_ORACLE_HOME=${ORACLE_HOME}

# java settings
export              JAVA_HOME=${ORACLE_BASE}/products/identity/jdk/current
export               ANT_HOME=${MW_HOME}/modules/org.apache.ant_1.7.1
export            JAVA_VENDOR=Oracle
export        PRODUCTION_MODE=true
export DOMAIN_PRODUCTION_MODE=true

# instances
export        DOMAIN=__DOMAIN_NAME__
export    ADMIN_HOME=${ORACLE_BASE}/config/domains/${DOMAIN}
export      WRK_HOME=${ORACLE_BASE}/services/domains/${DOMAIN}
export   DOMAIN_HOME=${WRK_HOME}
export    DOMAIN_LOG=${LOG_BASE}/${DOMAIN}
export      IDM_PROP=~/.env/identity.prop

# path
export PATH=${DPATH}:${JAVA_HOME}/bin:${ORACLE_HOME}/bin:${ANT_HOME}/bin

# wlst with domain properties
alias     wlst='rlwrap ${WL_HOME}/common/bin/wlst.sh -loadProperties ${IDM_PROP}'
# follow logs
alias nodelogs='tail -F ${LOG_BASE}/nodemanager/*'
alias  srvlogs='tail -F ${DOMAIN_LOG}/AdminServer/AdminServer.out ${DOMAIN_LOG}/wls_soa1/wls_soa1.out ${DOMAIN_LOG}/wls_oim1/wls_oim1.out'

unset  INSTANCE
unset INST_HOME
unset  INST_LOG

export E=idm

# deploy to weblogic, property file used
# param 1: application name
#
deploy() {
  . ${WL_HOME}/server/bin/setWLSEnv.sh
  java weblogic.WLST -loadProperties ~/.env/${1}.prop ~/lib/deploy.py
}

