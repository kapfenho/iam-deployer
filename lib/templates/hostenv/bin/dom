#!/bin/sh
# vi:ft=sh:

WARNING_DONE=0
ERROR_FILE_NOT_FOUND=80
ERROR_SYNTAX_ERROR=81
ERROR_WLST=82


check_domain() {
  if ! [ -f "~/.env/${DOMAIN}.env" ] ; then
    echo "ERROR: domain ${DOMAIN} unkown"
    exit $ERR_DOMAIN_UNKOWN
  fi
}

domstart() {
  source ~/.env/${DOMAIN}.env
  ${WL_HOME}/common/bin/wlst.sh -loadProperties ~/.env/${DOMAIN}.prop <<EOS
acNmConnect();
nmStart('AdminServer');
acConnect();
start(name='oam_cluster',type='Cluster');
start(name='ama_cluster',type='Cluster');
exit();
EOS
}

if ! shopt -q login_shell ; then
  source /etc/profile
fi

#  remember original parameters for host calls
orig_params="${@}"
printhelp=0

if   [ $# -lt 1 ] ; then
  printhelp=1

elif [ $# -eq 1 ] ; then

  if [ "${1}" == "status" ] ; then
    dom_global_status
  else
    printhelp=1
  fi

else

  DOMAIN=${1}
  check_domain ${DOMAIN}
  
  case ${2} in
    start)
      shift ; shift
      domstart $*
      ;;

    stop)
      shift ; shift
      domstop $*
      ;;

    kill)
      shift ; shift
      domkill $*
      ;;

    status)
      domstatus
      ;;

    *)
      printhelp=1
      ;;
  esac
fi


if [ "X${printhelp}" == "X1" ] ; then
  domhelp
  exit $ERROR_SYNTAX_ERROR
fi




