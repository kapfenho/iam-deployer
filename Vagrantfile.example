#  Oracle Identity and Access Management
#  vi: set ft=ruby :
#
VAGRANTFILE_API_VERSION = "2"
app_name       = "iam2.agoracon.at"
app_name_short = "iam2"
app_ip         = "192.168.168.41"
app_box        = "centos6min"
app_box_url    = "https://agoracon.at/boxes/centos6min.box"
app_box_sha    = "bce6a99728ceaeb017f475ee734f676390cf8c49b6aed721a3247c204daa507f"
mnt            = "/mnt/oracle"

# hostfile may need your nfs host
$hostfile = "# hostfile generated by vagrant provisioning
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
#{app_ip} #{app_name} #{app_name_short}"
 
Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  config.vm.define :app, primary: true do |app|
    app.vm.box                        = app_box
    app.vm.hostname                   = app_name
    app.vm.box_url                    = app_box_url
    app.vm.box_download_checksum      = app_box_sha
    app.vm.box_download_checksum_type = "sha256"

    app.vm.network :private_network, ip: app_ip

    #app.vm.synced_folder "/mnt/oracle", "/mnt/oracle", nfs: true

    app.vm.provider :virtualbox do |vb|
      vb.customize ["modifyvm", :id,
                    "--memory", "12288",
                    "--name", app_name,
                    "--cpus", "4"]
    end
    app.vm.provision :shell, inline: "echo provisioning /etc/hosts"
    app.vm.provision :shell, inline: "echo '#{$hostfile}' > /etc/hosts" 
    app.vm.provision :shell, inline: "bash /vagrant/provision.sh"

  end

end

